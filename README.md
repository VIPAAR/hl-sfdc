# Salesforce + Galdr prototype

This is a simple prototype to integrate salesforce.com with
galdr. This creates a new "Help Lightning Session" component that can
be integrated into the "Cases" page.

To get this to work, you need to:

1. Edit HLSessionController.apxc and
   1. Edit the apiKey
   1. Edit the pkcs8 variable with your public key generated by
      galdr. You will need to convert from PEM format to pcks8 format
      and remove all newlines.
   1. Edit the enterpriseId variable
1. Add the component to the Cases layout
   1. I have only tested this in the lightning interface. But you
      should be able to edit the page and just drag the component into
      the cases view.
1. Make sure your salesforce.com login is the SAME as your Help
   Lightning email login!
1. Create a new case that has a contact with an email address
   associated with a help lightning user.
1. Click the Call XXX Under the Help Lightning component.
1. This will generate a galdr session and ring you and the contact.

## Required Custom Objects

This requires a new Object called `HLCall` with the following attributes:

<table>
  <tr>
    <th>Field Label</th>
    <th>Field Name</th>
    <th>Data Type</th>
    <th>Required</th>
  </tr>
  <tr>
    <td>Case</td>
    <td>Case__c</td>
    <td>Master-Detail(Case)</td>
    <td>y</td>
  </tr>
  <tr>
    <td>Complete</td>
    <td>Complete__c</td>
    <td>Checkbox</td>
    <td>n</td>
  </tr>
  <tr>
    <td>Contact Email</td>
    <td>Contact_Email__c</td>
    <td>Email</td>
    <td>y</td>
  </tr>
  <tr>
    <td>Duration</td>
    <td>Duration__c</td>
    <td>Number(18,0)</td>
    <td>n</td>
  </tr>
  <tr>
    <td>End Time</td>
    <td>End_Time__c</td>
    <td>Date/Time</td>
    <td>n</td>
  </tr>
  <tr>
    <td>HLCall Id</td>
    <td>HLCall_Id__c</td>
    <td>Text Area(255)</td>
    <td>n</td>
  </tr>
  <tr>
    <td>Session Id</td>
    <td>Session_Id__c</td>
    <td>Text(255)</td>
    <td>y</td>
  </tr>
  <tr>
    <td>Start Time</td>
    <td>Start_Time__c</td>
    <td>Date/Time</td>
    <td>y</td>
  </tr>
  <tr>
    <td>Successful</td>
    <td>Successful__c</td>
    <td>Checkbox</td>
    <td>n</td>
  </tr>
  <tr>
    <td>Type</td>
    <td>Type__c</td>
    <td>Picklist with options [Direct, Invitation]</td>
    <td>y</td>
  </tr>
</table>
